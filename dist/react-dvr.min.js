!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("prop-types"),require("styled-components"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","prop-types","styled-components","react-dom"],t):e.reactDvr=t(e.React,e.PropTypes,e.styled,e.ReactDOM)}(this,function(e,t,n,a){"use strict";function o(){return(o=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return e.raw=t,e}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n,a=a&&a.hasOwnProperty("default")?a.default:a;var l=function(t){function n(){for(var e,n,a=arguments.length,o=Array(a),r=0;a>r;r++)o[r]=arguments[r];return e=n=t.call.apply(t,[this].concat(o))||this,n.state={name:"",error:null},n.handleChange=function(e){var t;n.setState(((t={})[e.target.name]=e.target.value,t))},n.handleSubmit=function(e){e.preventDefault();var t=n.props.onSubmit,a=n.state.name.trim();""!==a?t({name:a,onError:function(e){n.setState({error:e.message})}}):n.setState({error:"Name is required"})},e||i(n)}return r(n,t),n.prototype.render=function(){var t=this.props.onCancel,n=this.state,a=n.error;return e.createElement("form",{onSubmit:this.handleSubmit},e.createElement("input",{type:"text",name:"name",placeholder:"Name this State",value:n.name,onChange:this.handleChange}),a&&e.createElement("div",null,a),e.createElement("button",null,"Save Props"),e.createElement("button",{onClick:t},"Cancel"))},n}(e.Component);l.propTypes={onCancel:t.func.isRequired,onSubmit:t.func.isRequired};var s=c(["\n  position: fixed;\n  bottom: 15px;\n  left: 15px;\n  z-index: 999999;\n  padding: 12px 15px 15px;\n  min-width: 240px;\n  border-radius: 4px;\n  border: 2px solid #000;\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);\n  background-color: rgba(0, 0, 0, 0.8);\n  color: #fff;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 14px;\n  line-height: 24px;\n  -webkit-font-smoothing: antialiased;\n"],["\n  position: fixed;\n  bottom: 15px;\n  left: 15px;\n  z-index: 999999;\n  padding: 12px 15px 15px;\n  min-width: 240px;\n  border-radius: 4px;\n  border: 2px solid #000;\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);\n  background-color: rgba(0, 0, 0, 0.8);\n  color: #fff;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 14px;\n  line-height: 24px;\n  -webkit-font-smoothing: antialiased;\n"]),d=c(["\n  font-weight: bold;\n  font-size: 16px;\n  margin-bottom: 5px;\n"],["\n  font-weight: bold;\n  font-size: 16px;\n  margin-bottom: 5px;\n"]),p=c(["\n  margin: 0 -5px 5px;\n"],["\n  margin: 0 -5px 5px;\n"]),u=c(["\n  display: flex;\n  padding: 0 5px;\n  justify-content: space-between;\n  &:hover {\n    background-color: rgba(255, 255, 255, 0.1);\n  }\n"],["\n  display: flex;\n  padding: 0 5px;\n  justify-content: space-between;\n  &:hover {\n    background-color: rgba(255, 255, 255, 0.1);\n  }\n"]),f=c(["\n  flex-grow: 1;\n"],["\n  flex-grow: 1;\n"]),m=c(["\n  opacity: 0;\n  cursor: pointer;\n\n  .rdvr-state-row:hover & {\n    opacity: 0.5;\n    &:hover {\n      opacity: 1;\n    }\n  }\n"],["\n  opacity: 0;\n  cursor: pointer;\n\n  .rdvr-state-row:hover & {\n    opacity: 0.5;\n    &:hover {\n      opacity: 1;\n    }\n  }\n"]),h=n.div(s),g=n.div(d),S=n.div(p),v=n.div(u),y=n.label(f),b=n.div(m),x=function(t){function n(){for(var e,n,a=arguments.length,o=Array(a),r=0;a>r;r++)o[r]=arguments[r];return e=n=t.call.apply(t,[this].concat(o))||this,n.state={isAdding:!1},n.handleClickAdd=function(){n.setState({isAdding:!0})},n.handleClickCancelAdd=function(){n.setState({isAdding:!1})},n.handleAddState=function(e){var t=e.name,a=e.onError;n.props.states.some(function(e){return e.name===t})?a({message:"Name is already used"}):(n.props.onAddState(t),n.setState({isAdding:!1}))},e||i(n)}return r(n,t),n.prototype.render=function(){var t=this.props,n=t.activeState,a=t.states,o=t.onSetActiveState,r=t.onRemoveState,i=this.state.isAdding;return t.isShowing?e.createElement(h,null,e.createElement(g,null,"React DVR"),e.createElement(S,null,e.createElement(v,null,e.createElement(y,null,e.createElement("input",{type:"radio",checked:!n,onChange:function(){o(null)}})," ","Don't use saved state")),a.map(function(t){var a=t.name;return e.createElement(v,{key:a,className:"rdvr-state-row"},e.createElement(y,null,e.createElement("input",{type:"radio",checked:n===a,onChange:function(){o(a)}})," ",a," "),e.createElement(b,{onClick:function(){r(a)}},"Ã—"))})),i?e.createElement(l,{onSubmit:this.handleAddState,onCancel:this.handleClickCancelAdd}):e.createElement("button",{onClick:this.handleClickAdd,disabled:!!n},"Add State")):e.createElement("noscript",null)},n}(e.Component);x.propTypes={isShowing:t.bool.isRequired,states:t.arrayOf(t.shape({name:t.string.isRequired,props:t.object.isRequired})).isRequired,onAddState:t.func.isRequired,onRemoveState:t.func.isRequired,onSetActiveState:t.func.isRequired,activeState:t.string};var w={toggleKeyCode:"Backquote",localStorageKey:"__react-dvr-props__"};return function(t){return function(n){return function(c){function l(){for(var n,r,l=arguments.length,s=Array(l),d=0;l>d;d++)s[d]=arguments[d];return n=r=c.call.apply(c,[this].concat(s))||this,r.options=o({},w,t),r.handleKeyUp=function(e){e.code===r.options.toggleKeyCode&&r.setLocalStorageState(function(e){return o({},e,{isShowingUI:!e.isShowingUI})})},r.handleAddState=function(e){e&&r.setLocalStorageState(function(t){return o({},t,{states:(t.states||[]).concat([{name:e,props:r.props}])})})},r.handleRemoveState=function(e){r.setLocalStorageState(function(t){return o({},t,{states:t.states.filter(function(t){return t.name!==e}),activeState:t.activeState===e?null:t.activeState})})},r.handleSetActiveState=function(e){r.setLocalStorageState({activeState:e})},r.getLocalStorageState=function(){var e=localStorage.getItem(r.options.localStorageKey);return o({states:[]},e?JSON.parse(e):{})},r.setLocalStorageState=function(e){var t=localStorage.getItem(r.options.localStorageKey),n=t?JSON.parse(t):{},a="function"==typeof e?e(n):o({},n,e);localStorage.setItem(r.options.localStorageKey,JSON.stringify(a)),r.forceUpdate()},r.renderOverlay=function(){if(document.body){var t=r.getLocalStorageState(),n=t.isShowingUI,o=t.states,i=t.activeState;r.overlayTarget||(r.overlayTarget=document.createElement("div"),document.body.appendChild(r.overlayTarget)),a.render(e.createElement(x,{isShowing:n,activeState:i,states:o,onSetActiveState:r.handleSetActiveState,onAddState:r.handleAddState,onRemoveState:r.handleRemoveState}),r.overlayTarget)}},n||i(r)}r(l,c);var s=l.prototype;return s.componentDidMount=function(){window.addEventListener("keyup",this.handleKeyUp),this.renderOverlay()},s.componentDidUpdate=function(){this.renderOverlay()},s.componentWillUnmount=function(){window.removeEventListener("keyup",this.handleKeyUp),a.unmountComponentAtNode(this.overlayTarget)},s.render=function(){var t=this.getLocalStorageState(),a=t.activeState,r=a?t.states.find(function(e){return e.name===a}).props:{};return e.createElement(n,o({},this.props,r))},l}(e.Component)}}});
