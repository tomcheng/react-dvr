!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("prop-types"),require("styled-components"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","prop-types","styled-components","react-dom"],t):e.reactDvr=t(e.React,e.PropTypes,e.styled,e.ReactDOM)}(this,function(e,t,n,o){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return e.raw=t,e}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n,o=o&&o.hasOwnProperty("default")?o.default:o;var l=d(["\n  display: block;\n  box-sizing: border-box;\n  width: 100%;\n  background-color: rgba(255, 255, 255, 0.9);\n  border: 1px solid #000;\n  padding: 0 5px;\n  line-height: 24px;\n  border-radius: 3px;\n  margin-bottom: 5px;\n"],["\n  display: block;\n  box-sizing: border-box;\n  width: 100%;\n  background-color: rgba(255, 255, 255, 0.9);\n  border: 1px solid #000;\n  padding: 0 5px;\n  line-height: 24px;\n  border-radius: 3px;\n  margin-bottom: 5px;\n"]),c=d(["\n  display: flex;\n  justify-content: flex-end;\n"],["\n  display: flex;\n  justify-content: flex-end;\n"]),s=d(["\n  order: 2;\n  margin-left: 5px;\n"],["\n  order: 2;\n  margin-left: 5px;\n"]),p=d(["\n  order: 1;\n"],["\n  order: 1;\n"]),u=n.input(l),f=n.div(c),h=n.button(s),m=n.button(p),g=function(t){function n(){for(var e,n,o=arguments.length,r=Array(o),a=0;o>a;a++)r[a]=arguments[a];return e=n=t.call.apply(t,[this].concat(r))||this,n.state={name:"",error:null},n.handleChange=function(e){var t;n.setState(((t={})[e.target.name]=e.target.value,t))},n.handleSubmit=function(e){e.preventDefault();var t=n.props.onSubmit,o=n.state.name.trim();""!==o?t({name:o,onError:function(e){n.setState({error:e.message})}}):n.setState({error:"Name is required"})},e||i(n)}return a(n,t),n.prototype.render=function(){var t=this.props.onCancel,n=this.state,o=n.error;return e.createElement("form",{onSubmit:this.handleSubmit},e.createElement(u,{type:"text",name:"name",placeholder:"Name this State",value:n.name,onChange:this.handleChange,autoFocus:!0}),o&&e.createElement("div",null,o),e.createElement(f,null,e.createElement(h,null,"Save State"),e.createElement(m,{onClick:t},"Cancel")))},n}(e.Component);g.propTypes={onCancel:t.func.isRequired,onSubmit:t.func.isRequired};var y=d(["\n  position: fixed;\n  bottom: 15px;\n  left: 15px;\n  z-index: 999999;\n  padding: 12px 15px 15px;\n  min-width: 240px;\n  border-radius: 4px;\n  border: 2px solid #000;\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);\n  background-color: rgba(0, 0, 0, 0.8);\n  color: #fff;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 14px;\n  line-height: 24px;\n  -webkit-font-smoothing: antialiased;\n"],["\n  position: fixed;\n  bottom: 15px;\n  left: 15px;\n  z-index: 999999;\n  padding: 12px 15px 15px;\n  min-width: 240px;\n  border-radius: 4px;\n  border: 2px solid #000;\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);\n  background-color: rgba(0, 0, 0, 0.8);\n  color: #fff;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 14px;\n  line-height: 24px;\n  -webkit-font-smoothing: antialiased;\n"]),v=d(["\n  font-weight: bold;\n  font-size: 16px;\n  margin-bottom: 5px;\n"],["\n  font-weight: bold;\n  font-size: 16px;\n  margin-bottom: 5px;\n"]),S=d(["\n  margin: 0 -5px 10px;\n"],["\n  margin: 0 -5px 10px;\n"]),b=d(["\n  display: flex;\n  padding: 0 5px;\n  justify-content: space-between;\n  &:hover {\n    background-color: rgba(255, 255, 255, 0.1);\n  }\n"],["\n  display: flex;\n  padding: 0 5px;\n  justify-content: space-between;\n  &:hover {\n    background-color: rgba(255, 255, 255, 0.1);\n  }\n"]),x=d(["\n  flex-grow: 1;\n"],["\n  flex-grow: 1;\n"]),w=d(["\n  opacity: 0;\n  cursor: pointer;\n\n  .rdvr-state-row:hover & {\n    opacity: 0.5;\n    &:hover {\n      opacity: 1;\n    }\n  }\n"],["\n  opacity: 0;\n  cursor: pointer;\n\n  .rdvr-state-row:hover & {\n    opacity: 0.5;\n    &:hover {\n      opacity: 1;\n    }\n  }\n"]),A=d(["\n  display: block;\n  text-align: center;\n  border: 1px dashed #fff;\n  border-radius: 4px;\n  cursor: ",";\n  opacity: ",";\n  \n  &:hover {\n    opacity: ",";\n  }\n"],["\n  display: block;\n  text-align: center;\n  border: 1px dashed #fff;\n  border-radius: 4px;\n  cursor: ",";\n  opacity: ",";\n  \n  &:hover {\n    opacity: ",";\n  }\n"]),E=n.div(y),k=n.div(v),C=n.div(S),R=n.div(b),O=n.label(x),q=n.div(w),L=n.div(A,function(e){return e.disabled?"default":"pointer"},function(e){return e.disabled?.2:.6},function(e){return e.disabled?.2:1}),U=function(t){function n(){for(var e,n,o=arguments.length,r=Array(o),a=0;o>a;a++)r[a]=arguments[a];return e=n=t.call.apply(t,[this].concat(r))||this,n.state={isAdding:!1},n.handleClickAdd=function(){n.setState({isAdding:!0})},n.handleClickCancelAdd=function(){n.setState({isAdding:!1})},n.handleAddState=function(e){var t=e.name,o=e.onError;n.props.states.some(function(e){return e.name===t})?o({message:"Name is already used"}):(n.props.onAddState(t),n.setState({isAdding:!1}))},e||i(n)}return a(n,t),n.prototype.render=function(){var t=this.props,n=t.activeState,o=t.states,r=t.onSetActiveState,a=t.onRemoveState,i=this.state.isAdding;return t.isShowing?e.createElement(E,null,e.createElement(k,null,"React DVR"),e.createElement(C,null,e.createElement(R,null,e.createElement(O,null,e.createElement("input",{type:"radio",checked:!n,onChange:function(){r(null)}})," ","Don't use saved state")),o.map(function(t){var o=t.name;return e.createElement(R,{key:o,className:"rdvr-state-row"},e.createElement(O,null,e.createElement("input",{type:"radio",checked:n===o,onChange:function(){r(o)}})," ",o," "),e.createElement(q,{onClick:function(){a(o)}},"Ã—"))})),i?e.createElement(g,{onSubmit:this.handleAddState,onCancel:this.handleClickCancelAdd}):e.createElement(L,{onClick:this.handleClickAdd,disabled:!!n},"Add State")):e.createElement("noscript",null)},n}(e.Component);U.propTypes={isShowing:t.bool.isRequired,states:t.arrayOf(t.shape({name:t.string.isRequired,props:t.object.isRequired})).isRequired,onAddState:t.func.isRequired,onRemoveState:t.func.isRequired,onSetActiveState:t.func.isRequired,activeState:t.string};var j={toggleKeyCode:"Backquote",localStorageKey:"__react-dvr__"},K={activeState:null,states:[],showUI:!0};return function(t){return function(n){return function(d){function l(){for(var n,a,l=arguments.length,c=Array(l),s=0;l>s;s++)c[s]=arguments[s];return n=a=d.call.apply(d,[this].concat(c))||this,a.options=r({},j,t),a.handleKeyUp=function(e){e.code===a.options.toggleKeyCode&&a.setLocalStorageState(function(e){return r({},e,{showUI:!e.showUI})})},a.handleAddState=function(e){e&&a.setLocalStorageState(function(t){return r({},t,{states:(t.states||[]).concat([{name:e,props:a.props}])})})},a.handleRemoveState=function(e){a.setLocalStorageState(function(t){return r({},t,{states:t.states.filter(function(t){return t.name!==e}),activeState:t.activeState===e?null:t.activeState})})},a.handleSetActiveState=function(e){a.setLocalStorageState({activeState:e})},a.getLocalStorageState=function(){var e=localStorage.getItem(a.options.localStorageKey),t=e?JSON.parse(e):{};return r({},K,t)},a.setLocalStorageState=function(e){var t=localStorage.getItem(a.options.localStorageKey),n=t?JSON.parse(t):{},o="function"==typeof e?e(n):r({},n,e);localStorage.setItem(a.options.localStorageKey,JSON.stringify(o)),a.forceUpdate()},a.renderOverlay=function(){if(document.body){var t=a.getLocalStorageState(),n=t.showUI,r=t.states,i=t.activeState;a.overlayTarget||(a.overlayTarget=document.createElement("div"),document.body.appendChild(a.overlayTarget)),o.render(e.createElement(U,{isShowing:n,activeState:i,states:r,onSetActiveState:a.handleSetActiveState,onAddState:a.handleAddState,onRemoveState:a.handleRemoveState}),a.overlayTarget)}},n||i(a)}a(l,d);var c=l.prototype;return c.componentDidMount=function(){window.addEventListener("keyup",this.handleKeyUp),this.renderOverlay()},c.componentDidUpdate=function(){this.renderOverlay()},c.componentWillUnmount=function(){window.removeEventListener("keyup",this.handleKeyUp),o.unmountComponentAtNode(this.overlayTarget)},c.render=function(){var t=this.getLocalStorageState(),o=t.activeState,a=o?t.states.find(function(e){return e.name===o}).props:{};return e.createElement(n,r({},this.props,a))},l}(e.Component)}}});
