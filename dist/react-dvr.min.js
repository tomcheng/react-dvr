!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("prop-types"),require("styled-components"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","prop-types","styled-components","react-dom"],t):e.reactDvr=t(e.React,e.PropTypes,e.styled,e.ReactDOM)}(this,function(e,t,n,o){"use strict";function a(){return(a=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){return e.raw=t,e}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n,o=o&&o.hasOwnProperty("default")?o.default:o;var c=function(t){function n(){for(var e,n,o=arguments.length,a=Array(o),r=0;o>r;r++)a[r]=arguments[r];return e=n=t.call.apply(t,[this].concat(a))||this,n.state={name:"",error:null},n.handleChange=function(e){var t;n.setState(((t={})[e.target.name]=e.target.value,t))},n.handleSubmit=function(e){e.preventDefault();var t=n.props.onSubmit,o=n.state.name.trim();console.log("on submit"),""!==o?t({name:o,onError:function(e){n.setState({error:e.message})}}):n.setState({error:"Name is required"})},e||i(n)}return r(n,t),n.prototype.render=function(){var t=this.props.onCancel,n=this.state,o=n.error;return e.createElement("form",{onSubmit:this.handleSubmit},e.createElement("input",{type:"text",name:"name",placeholder:"Name this State",value:n.name,onChange:this.handleChange}),o&&e.createElement("div",null,o),e.createElement("button",null,"Save Props"),e.createElement("button",{onClick:t},"Cancel"))},n}(e.Component);c.propTypes={onCancel:t.func.isRequired,onSubmit:t.func.isRequired};var l=s(["\n  position: fixed;\n  bottom: 15px;\n  left: 15px;\n  z-index: 999999;\n  padding: 12px 15px 15px;\n  min-width: 240px;\n  border-radius: 4px;\n  border: 2px solid #000;\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);\n  background-color: rgba(0, 0, 0, 0.8);\n  color: #fff;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 14px;\n  line-height: 24px;\n  -webkit-font-smoothing: antialiased;\n"],["\n  position: fixed;\n  bottom: 15px;\n  left: 15px;\n  z-index: 999999;\n  padding: 12px 15px 15px;\n  min-width: 240px;\n  border-radius: 4px;\n  border: 2px solid #000;\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);\n  background-color: rgba(0, 0, 0, 0.8);\n  color: #fff;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 14px;\n  line-height: 24px;\n  -webkit-font-smoothing: antialiased;\n"]),d=s(["\n  font-weight: bold;\n  font-size: 16px;\n  margin-bottom: 5px;\n"],["\n  font-weight: bold;\n  font-size: 16px;\n  margin-bottom: 5px;\n"]),p=s(["\n  margin: 0 -5px 5px;\n"],["\n  margin: 0 -5px 5px;\n"]),u=s(["\n  display: flex;\n  padding: 0 5px;\n  justify-content: space-between;\n  &:hover {\n    background-color: rgba(255, 255, 255, 0.1);\n  }\n"],["\n  display: flex;\n  padding: 0 5px;\n  justify-content: space-between;\n  &:hover {\n    background-color: rgba(255, 255, 255, 0.1);\n  }\n"]),f=s(["\n  flex-grow: 1;\n"],["\n  flex-grow: 1;\n"]),m=s(["\n  opacity: 0;\n  cursor: pointer;\n\n  .rdvr-state-row:hover & {\n    opacity: 0.5;\n    &:hover {\n      opacity: 1;\n    }\n  }\n"],["\n  opacity: 0;\n  cursor: pointer;\n\n  .rdvr-state-row:hover & {\n    opacity: 0.5;\n    &:hover {\n      opacity: 1;\n    }\n  }\n"]),h=n.div(l),g=n.div(d),v=n.div(p),S=n.div(u),y=n.label(f),b=n.div(m),x=function(t){function n(){for(var e,n,o=arguments.length,a=Array(o),r=0;o>r;r++)a[r]=arguments[r];return e=n=t.call.apply(t,[this].concat(a))||this,n.state={isAdding:!1},n.handleClickAdd=function(){n.setState({isAdding:!0})},n.handleClickCancelAdd=function(){n.setState({isAdding:!1})},n.handleAddState=function(e){var t=e.name,o=e.onError;n.props.states.some(function(e){return e.name===t})?o({message:"Name is already used"}):(n.props.onAddState(t),n.setState({isAdding:!1}))},e||i(n)}return r(n,t),n.prototype.render=function(){var t=this.props,n=t.activeState,o=t.states,a=t.onSetActiveState,r=t.onRemoveState,i=this.state.isAdding;return t.isShowing?e.createElement(h,null,e.createElement(g,null,"React DVR"),e.createElement(v,null,e.createElement(S,null,e.createElement(y,null,e.createElement("input",{type:"radio",checked:!n,onChange:function(){a(null)}})," ","Don't use saved state")),o.map(function(t){var o=t.name;return e.createElement(S,{key:o,className:"rdvr-state-row"},e.createElement(y,null,e.createElement("input",{type:"radio",checked:n===o,onChange:function(){a(o)}})," ",o," "),e.createElement(b,{onClick:function(){r(o)}},"Ã—"))})),i?e.createElement(c,{onSubmit:this.handleAddState,onCancel:this.handleClickCancelAdd}):e.createElement("button",{onClick:this.handleClickAdd,disabled:!!n},"Add State")):e.createElement("noscript",null)},n}(e.Component);x.propTypes={isShowing:t.bool.isRequired,isOverriding:t.bool.isRequired,states:t.arrayOf(t.shape({name:t.string.isRequired,props:t.object.isRequired})).isRequired,onAddState:t.func.isRequired,onRemoveState:t.func.isRequired,onSetActiveState:t.func.isRequired,activeState:t.string};var w={toggleKeyCode:"Backquote",localStorageKey:"__react-dvr-props__"};return function(t){return function(n){return function(s){function c(){for(var n,r,c=arguments.length,l=Array(c),d=0;c>d;d++)l[d]=arguments[d];return n=r=s.call.apply(s,[this].concat(l))||this,r.options=a({},w,t),r.handleKeyUp=function(e){e.code===r.options.toggleKeyCode&&r.setLocalStorageState(function(e){return a({},e,{isShowingUI:!e.isShowingUI})})},r.handleAddState=function(e){e&&r.setLocalStorageState(function(t){return a({},t,{states:(t.states||[]).concat([{name:e,props:r.props}])})})},r.handleRemoveState=function(e){r.setLocalStorageState(function(t){return a({},t,{states:t.states.filter(function(t){return t.name!==e}),activeState:t.activeState===e?null:t.activeState})})},r.handleSetActiveState=function(e){r.setLocalStorageState({activeState:e})},r.getLocalStorageState=function(){var e=localStorage.getItem(r.options.localStorageKey);return a({states:[]},e?JSON.parse(e):{})},r.setLocalStorageState=function(e){var t=localStorage.getItem(r.options.localStorageKey),n=t?JSON.parse(t):{},o="function"==typeof e?e(n):a({},n,e);localStorage.setItem(r.options.localStorageKey,JSON.stringify(o)),r.forceUpdate()},r.renderOverlay=function(){if(document.body){var t=r.getLocalStorageState(),n=t.isShowingUI,a=t.isOverriding,i=t.states,s=t.activeState;r.overlayTarget||(r.overlayTarget=document.createElement("div"),document.body.appendChild(r.overlayTarget)),o.render(e.createElement(x,{isShowing:n,isOverriding:a,activeState:s,states:i,onSetActiveState:r.handleSetActiveState,onAddState:r.handleAddState,onRemoveState:r.handleRemoveState}),r.overlayTarget)}},n||i(r)}r(c,s);var l=c.prototype;return l.componentDidMount=function(){window.addEventListener("keyup",this.handleKeyUp),this.renderOverlay()},l.componentDidUpdate=function(){this.renderOverlay()},l.componentWillUnmount=function(){window.removeEventListener("keyup",this.handleKeyUp),o.unmountComponentAtNode(this.overlayTarget)},l.render=function(){var t=this.getLocalStorageState(),o=t.activeState,r=o?t.states.find(function(e){return e.name===o}).props:{};return e.createElement(n,a({},this.props,r))},c}(e.Component)}}});
